(this.webpackJsonpgodsunchained=this.webpackJsonpgodsunchained||[]).push([[0],{413:function(e,t,n){},425:function(e,t){},431:function(e,t){},432:function(e,t){},434:function(e,t){},435:function(e,t){},455:function(e,t){},459:function(e,t){},461:function(e,t){},470:function(e,t){},472:function(e,t){},498:function(e,t){},500:function(e,t){},505:function(e,t){},507:function(e,t){},514:function(e,t){},526:function(e,t){},529:function(e,t){},533:function(e,t){},609:function(e,t,n){},611:function(e,t,n){},621:function(e,t){},629:function(e,t){},701:function(e,t){},768:function(e,t,n){"use strict";n.r(t);var c=n(9),r=n.n(c),a=n(94),s=n.n(a),o=n(154),i=n(48),u=n(4),l=n.n(u),p=n(43),d=n(46),j=n(142),b=n.n(j),f=(n(413),n(780)),h=n(779),O=n(781),x=n(382),m=n(197),v=n(128),g=n(83),y="https://api.x.immutable.com/v1",S="0xacb3c6a43d15b907e8433077b6d38ae40936fe2c",w=new m.Link("https://link.x.immutable.com"),k="WALLET_ADDRESS",C="STARK_PUBLIC_KEY";function P(){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.setup({});case 2:t=e.sent,n=t.address,c=t.starkPublicKey,localStorage.setItem(k,n),localStorage.setItem(C,c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return I.apply(this,arguments)}function I(){return(I=Object(p.a)(l.a.mark((function e(){var t,n,c,r,a,s,o,i,u,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,v.ImmutableXClient.build({publicApiUrl:y});case 3:c=e.sent,r=localStorage.getItem("WALLET_ADDRESS");case 5:return e.next=7,c.getAssets({user:r,status:"imx",collection:S,sell_orders:!0}).then((function(e){return e}));case 7:a=e.sent,n=n.concat(a.result),t=a.cursor;case 10:if(t){e.next=5;break}case 11:console.log(n),s=Object(x.a)(n);try{for(s.s();!(o=s.n()).done;)(p=o.value).isListed=!1,(null===(i=p.orders)||void 0===i||null===(u=i.sell_orders)||void 0===u?void 0:u.length)>0&&(p.isListed=!0)}catch(l){s.e(l)}finally{s.f()}case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return A.apply(this,arguments)}function A(){return(A=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.buy({orderId:t});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=n(18);var T=function(e){var t=e.showPopup,n=e.setPopup,r=e.popupCard,a=Object(c.useState)(null),s=Object(d.a)(a,2),o=s[0],i=s[1],u=Object(c.useState)(null),j=Object(d.a)(u,2),x=j[0],m=j[1],v=Object(c.useState)(null),g=Object(d.a)(v,2),y=g[0],S=g[1],w=Object(c.useState)("Meteorite"),k=Object(d.a)(w,2),C=k[0],P=k[1],E=Object(c.useState)(!1),L=Object(d.a)(E,2),I=(L[0],L[1]),A=Object(c.useState)(!1),T=Object(d.a)(A,2),_=T[0],M=T[1],R={minPrice:Number.MAX_SAFE_INTEGER,orderID:null},W=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),"https://api.x.immutable.com/v1/orders",t=JSON.stringify({proto:["".concat(r.id)],quality:["".concat(C)]}),e.prev=3,e.next=6,b.a.get("https://api.x.immutable.com/v1/orders",{params:{sell_metadata:t,status:"active",order_by:"buy_quantity",direction:"asc"}});case 6:n=e.sent,c=n.data.result,console.log(c),c.map((function(e){var t=e.buy.data.quantity,n=e.buy.data.decimals,c=(t*Math.pow(10,-n)).toFixed(6),r=e.order_id;R.minPrice>c&&(R.minPrice=c,R.orderID=r)})),a=c[0].sell.data.properties.image_url,i(R.minPrice),m(R.orderID),S(a),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),I(!0),console.log("erreur");case 20:return e.prev=20,M(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[3,16,20,23]])})));return function(){return e.apply(this,arguments)}}();function H(){return(H=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(x.toString()),e.next=4,D(x.toString());case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){W()}),[]),Object(c.useEffect)((function(){W()}),[C]),Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(f.a,{show:t,onHide:function(){n(!t)},children:[Object(N.jsx)(f.a.Header,{closeButton:!0,children:Object(N.jsx)(f.a.Title,{children:r.name})}),Object(N.jsx)(f.a.Body,{children:_?Object(N.jsxs)("div",{className:"container d-flex justify-content-center",children:[Object(N.jsx)(h.a,{animation:"grow"})," "]}):Object(N.jsxs)("div",{children:[Object(N.jsxs)("p",{children:["Quality : ",C]}),Object(N.jsxs)("p",{children:["Price : ",o]}),Object(N.jsxs)("p",{children:["Order ID : ",x]}),Object(N.jsx)("div",{className:"container d-flex justify-content-center",children:Object(N.jsx)("img",{src:y,alt:r.id})}),Object(N.jsx)("button",{onClick:function(){return H.apply(this,arguments)},children:"BUY"})]})}),Object(N.jsxs)(f.a.Footer,{children:[Object(N.jsx)(O.a,{variant:"secondary",onClick:function(){P("Meteorite")},children:"Meteorite"}),Object(N.jsx)(O.a,{variant:"primary",onClick:function(){P("Shadow"),console.log("Shadow")},children:"Shadow"}),Object(N.jsx)(O.a,{variant:"warning",onClick:function(){P("Gold")},children:"Gold"}),Object(N.jsx)(O.a,{variant:"link",onClick:function(){P("Diamond")},children:"Diamond"})]})]})})};var _=function(e){var t=e.card,n=e.showPopup,c=e.setPopup,r=(e.popupCard,e.setPopupCard);return Object(N.jsx)("div",{className:"card",children:Object(N.jsx)("li",{children:Object(N.jsx)("img",{className:"nft-item-cover",src:"https://card.godsunchained.com/?id=".concat(t.id,"&q=4"),alt:"".concat(t.id," cover"),onClick:function(){c(!n),r(t)}})},t.id)})};n(609);var M=function(e){var t=e.showPopup,n=e.setPopup,r=e.popupCard,a=e.setPopupCard,s=Object(c.useState)([]),o=Object(d.a)(s,2),i=o[0],u=o[1],j=Object(c.useState)([]),f=Object(d.a)(j,2),h=f[0],O=f[1];Object(c.useEffect)((function(){x()}),[]),Object(c.useEffect)((function(){console.log(h)}),[h]);var x=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.godsunchained.com/v0/proto?perPage=2000",e.next=3,b()("https://api.godsunchained.com/v0/proto?perPage=2000");case 3:t=e.sent,n=t.data.records,console.log(n),O(n),u(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"container d-flex justify-content-center",children:Object(N.jsx)("input",{type:"text",onChange:function(e){var t=i.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));O(t)}})}),Object(N.jsx)("ul",{className:"list-unstyled",children:Object(N.jsx)("div",{className:"row",children:h.map((function(e){return Object(N.jsx)(_,{card:e,showPopup:t,setPopup:n,popupCard:r,setPopupCard:a},e.id)}))})})]})};var R=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),s=Object(d.a)(a,2),o=s[0],i=s[1];return console.log(o),Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)(M,{showPopup:n,setPopup:r,popupCard:o,setPopupCard:i}),n?Object(N.jsx)(T,{showPopup:n,setPopup:r,popupCard:o}):null]})},W=(n(610),n(611),n.p+"static/media/logo.aac3612d.png"),H=(n(612),Object(c.createContext)()),B=function(e){var t=e.children,n=Object(c.useState)(null!==localStorage.getItem("WALLET_ADDRESS")),r=Object(d.a)(n,2),a=r[0],s=r[1];return Object(N.jsx)(H.Provider,{value:{logged:a,setLogged:s},children:t})};var F=function(){var e=Object(c.useContext)(H),t=e.logged,n=e.setLogged,r=localStorage.getItem("WALLET_ADDRESS"),a=Object(i.e)();function s(){return(s=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?alert("user already connected"):function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P();case 3:n(!0),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),n(!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(N.jsxs)("div",{className:" jumbotron d-flex headerWrapper",children:[Object(N.jsx)("img",{src:W,className:"mainLogo",alt:"mainLogo"}),Object(N.jsx)("h1",{className:"mainTitle",children:"GodsUnchained"}),Object(N.jsx)("button",{onClick:function(){return s.apply(this,arguments)},children:t?Object(N.jsx)("span",{children:r}):Object(N.jsx)("span",{children:"Connect"})}),Object(N.jsx)("button",{onClick:function(){if(t){localStorage.removeItem("WALLET_ADDRESS"),n(!1);a.push("/"),alert("user disconnecterd")}else alert("user not logged in")},children:"Disconnect"}),Object(N.jsxs)("nav",{children:[Object(N.jsx)(o.b,{to:"/",children:"Home page"}),Object(N.jsx)(o.b,{to:"/account",children:"Your account"})]})]})};var U=function(){var e=Object(c.useState)("undefined"),t=Object(d.a)(e,2),n=t[0],r=t[1];Object(c.useEffect)((function(){console.log(localStorage.getItem("address"))}),[]);var a=new m.Link("https://link.uat.x.immutable.com");function s(){return(s=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setup({});case 2:t=e.sent,n=t.address,localStorage.setItem("address",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.deposit({type:g.ETHTokenType.ETH,amount:"0.001"});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(p.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.ImmutableXClient.build({publicApiUrl:"https://api.uat.x.immutable.com/v1/"});case 2:if(t=e.sent,n=localStorage.getItem("address"),console.log("adresse"),console.log(n),!n){e.next=20;break}return e.next=9,t.getBalances({user:n});case 9:return c=e.sent,e.next=12,t.getOrders();case 12:return e.sent,e.next=15,t.getOrder({orderId:1});case 15:return e.sent,e.next=18,t.getAssets({user:n});case 18:e.sent,r(c.imx.toNumber()*Math.pow(10,-18));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(N.jsxs)("div",{children:[Object(N.jsx)("button",{onClick:function(){!function(){s.apply(this,arguments)}()},children:"LOG IN "}),Object(N.jsx)("button",{onClick:function(){!function(){o.apply(this,arguments)}()},children:"DEPOSIT TO IMX "}),Object(N.jsx)("button",{onClick:function(){!function(){i.apply(this,arguments)}()},children:"SHOW FUNDS"}),Object(N.jsxs)("h2",{children:[n," ETH "]}),Object(N.jsx)(R,{})]})};var G=function(){var e=Object(c.useContext)(H),t=e.logged,n=e.setLogged,r=Object(c.useState)(""),a=Object(d.a)(r,2),s=a[0],o=a[1],i=Object(c.useState)([]),u=Object(d.a)(i,2),j=u[0],b=u[1],f=Object(c.useState)(!1),h=Object(d.a)(f,2),O=h[0],x=h[1],m=Object(c.useState)(null),v=Object(d.a)(m,2),g=v[0],y=v[1];function S(){return(S=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=11;break}return e.prev=1,e.next=4,P();case 4:n(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),n(!1);case 11:o(localStorage.getItem("WALLET_ADDRESS")),w();case 13:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function w(){return k.apply(this,arguments)}function k(){return(k=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L();case 3:t=e.sent,b(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){S.apply(this,arguments)}()}),[]),Object(N.jsxs)("div",{children:[Object(N.jsx)("h1",{children:"My user Page"}),Object(N.jsxs)("span",{children:["My address : ",s," "]}),Object(N.jsx)("span",{children:"My collection : "}),t?Object(N.jsx)("ul",{className:"list-unstyled",children:Object(N.jsx)("div",{className:"row",children:j.map((function(e){return Object(N.jsx)(_,{card:e,showPopup:O,setPopup:x,popupCard:g,setPopupCard:y},e.id)}))})}):null]})};s.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(o.a,{children:Object(N.jsxs)(B,{children:[Object(N.jsx)(F,{}),Object(N.jsx)(i.a,{exact:!0,path:"/",children:Object(N.jsx)(U,{})}),Object(N.jsx)(i.a,{path:"/account",children:Object(N.jsx)(G,{})})]})})}),document.getElementById("root"))}},[[768,1,2]]]);
//# sourceMappingURL=main.e30a5697.chunk.js.map