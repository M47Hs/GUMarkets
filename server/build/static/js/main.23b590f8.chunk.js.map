{"version":3,"sources":["utils/ImmutableXConnection.js","utils/context.js","pages/Account.js","assets/logo.png","styles/GlobalStyle.js","components/Header.js","components/Discounts/DiscountItem.js","utils/apiCalls.js","pages/Discounts.js","components/Item.js","components/Collection.js","pages/Browse.js","components/Chart.js","components/NewOwners.js","components/Details/GeneralTab.js","components/Details/DetailedTab.js","pages/Details.js","components/Users/useGetNFTs.js","components/Users/Card.js","components/Users/useWalletData.js","components/Users/WalletData.js","components/Users/CardsList.js","components/Users/History/useGetTrades.js","components/Users/History/HistoryCard.js","components/Users/History/HistoryList.js","pages/User.js","index.js"],"names":["link","Link","WALLET_ADDRESS","STARK_PUBLIC_KEY","setupAndLogin","a","setup","address","starkPublicKey","localStorage","setItem","fillOrder","order","buy","orderId","LoggedContext","createContext","LoggedProvider","children","useState","getItem","logged","setLogged","Provider","value","Account","useContext","setAddress","isLoading","setLoading","console","log","useEffect","logAccount","className","Spinner","animation","to","Parallax","styled","button","div","SearchBar","input","SearchWrapper","CardWrapper","InfoWrapper","ImageWrapper","BuyButton","DefaultButton","SpinnerWrapper","Header","NavContainer","nav","StyledLink","HeaderWrapper","search","setSearch","history","useHistory","alert","src","Logo","alt","type","placeholder","onChange","e","target","onClick","removeItem","push","DiscountItem","apiAddress","COLLECTION_ADDRESS","toEthPrice","price","Math","pow","toFixed","getHistoricalEthPrice","Axios","get","response","result","data","prices","getEthPrice","params","ethereum","usd","getAllProtos","ImmutableXClient","build","publicApiUrl","ethPrice","config","headers","protos","forEach","proto","takerAssetAmount","getCheapestSellOrders","metadata","client","getOrders","page_size","status","sell_token_address","sell_metadata","order_by","direction","ordersRequest","orders","getCheapestUSDSellOrders","quantity","getOrdersHistory","min_date","cursor","ordersCursors","min_timestamp","concat","sort","b","updated_timestamp","localeCompare","getLastTrades","slice","getAssetInfo","id","url","infos","user","getLastTradesData","ethcurrentPrice","ethPriceHistory","datas","trades","trade","tokenID","sell","owner","unix_time","Date","parse","setUTCHours","found","find","element","undefined","uptime","timestamp","getAvgDailyPrice","h_prices","map","Map","unixtime","time","f_time","toLocaleDateString","day","month","has","res","volume","set","key","dict","getAllOrdersHistory","Discounts","popupCard","Item","token_proto","split","JSON","name","Collection","showPopup","setPopup","allProtos","setAllProtos","searchParam","setSearchParam","myProtos","initPage","toLowerCase","style","width","includes","Browse","Chart","quality","setHistory","Init","json","stringify","hprices","elem","ethprice","setMonth","getMonth","toISOString","setTime","getTime","ComposedChart","height","margin","top","right","bottom","left","XAxis","dataKey","stroke","YAxis","yAxisId","Label","angle","position","textAnchor","fill","orientation","domain","dataMax","Tooltip","contentStyle","wrapperStyle","color","itemStyle","Legend","Line","dot","Bar","barSize","NewOwners","WhiteText","table","setTrades","tradesData","init","scope","GeneralTab","getQuality","Pcontainer","handleBuy","order_id","DetailedTab","Details","qualities","useParams","setPrice","error","setError","setOrders","toggleState","setToggleState","toggleTab","index","orderID","useGetNFTs","setData","statePoints","setPoints","points","getAllPrices","getAllAssets","axios","resData","getPriceInfo","asset","allPrices","historicalPrices","amount_sold","properties","image_url","join","totalprotos","buyPrice","actualPrice","getActualPrice","diffPrice","filter","err","iterOnAssets","assets","Promise","all","Card","useWalletData","investment","setInvestment","values","setValues","roi","setRoi","sumBuyPrice","sumValues","sumDiff","getWalletData","WalletData","CardsList","userCards","card","useGetTrades","activeTrades","setActiveTrades","benefs","setBenefs","pending","setPending","getAllTrades","getAllActivePositions","token_id","length","sumActive","sum","usd_price","sumBenefs","makerAddress","calcs","_activeTrades","_benefs","_pending","HistoryCard","HistoryList","URLSearchParams","useLocation","User","ReactDOM","render","StrictMode","exact","path","document","getElementById"],"mappings":"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","file":"static/js/main.23b590f8.chunk.js","sourcesContent":["//ImmutableXConnection.js\r\n//Sample Immutable X functions for collection interaction\r\n\r\nimport { Link } from '@imtbl/imx-link-sdk';\r\nimport { ImmutableXClient } from '@imtbl/imx-link-lib';\r\nimport { ERC721TokenType, ETHTokenType } from '@imtbl/imx-link-types';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst linkAddress = 'https://link.x.immutable.com';\r\nconst apiAddress = 'https://api.x.immutable.com/v1';\r\n// Ropsten Testnet\r\n//const linkAddress = 'https://link.uat.x.immutable.com';\r\n//const apiAddress = 'https://api.uat.x.immutable.com/v1';\r\n\r\n//The token address for the collection to be monitored. Currently set to Gods Unchained\r\nconst COLLECTION_ADDRESS = '0xacb3c6a43d15b907e8433077b6d38ae40936fe2c';\r\n\r\nconst link = new Link(linkAddress);\r\n\r\n\r\nconst WALLET_ADDRESS = 'WALLET_ADDRESS';\r\nconst STARK_PUBLIC_KEY = 'STARK_PUBLIC_KEY';\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n//////////////////////// User Account Management /////////////////////////////\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\n//Creates or logs a user into their Immutable X account via web3 wallet\r\nexport async function setupAndLogin() {\r\n    const { address, starkPublicKey } = await link.setup({});\r\n    localStorage.setItem(WALLET_ADDRESS, address);\r\n    localStorage.setItem(STARK_PUBLIC_KEY, starkPublicKey);\r\n}\r\n\r\n//Remove the local storage wallet address\r\nexport function logout() {\r\n    localStorage.removeItem('WALLET_ADDRESS');\r\n}\r\n\r\n//Get the user balances\r\nexport async function getUserBalances() {\r\n    const client = await ImmutableXClient.build({ publicApiUrl: apiAddress });\r\n    const address = localStorage.getItem('WALLET_ADDRESS');\r\n    return await client.getBalances({ user: address });\r\n}\r\n\r\n//Deposits ETH into Immutable X\r\nexport async function depositEth(amountInEth) {\r\n    await link.deposit({\r\n        type: ETHTokenType.ETH,\r\n        amount: amountInEth\r\n    });\r\n}\r\n\r\n//Starts the withdrawal process from Immutable X\r\nexport async function prepareWithdrawal(amountInEth) {\r\n    await link.prepareWithdrawal({\r\n        type: ETHTokenType.ETH,\r\n        amount: amountInEth\r\n    });\r\n}\r\n\r\n//Finishes the withdrawal process from Immutable X\r\n//Must wait for user balance to have ETH in the withdrawable state \r\nexport async function completeWithdrawal() {\r\n    await link.prepareWithdrawal({\r\n        type: ETHTokenType.ETH\r\n    });\r\n}\r\n\r\n//Show user history\r\nexport async function showUserHistory() {\r\n    link.history({});\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n/////////////////////////////// Asset Management /////////////////////////////\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * Get the user's assets\r\n * @param {string} assetCursor - optional cursor parameter \r\n * @returns Object containing the assets and a cursor if more assets remain to be retrieved\r\n */\r\nexport async function getUserAssets(assetCursor) {\r\n    const client = await ImmutableXClient.build({ publicApiUrl: apiAddress });\r\n    const address = localStorage.getItem('WALLET_ADDRESS');\r\n    const assetsRequest = await client.getAssets({ user: address, cursor: assetCursor, status: 'imx', collection: COLLECTION_ADDRESS });\r\n    return { assets: assetsRequest.result, cursor: assetsRequest.cursor };\r\n}\r\n\r\n\r\nexport async function getAllUserAssets() {\r\n    let assetCursor;\r\n    let assets = [];\r\n    const client = await ImmutableXClient.build({ publicApiUrl: apiAddress });\r\n    const address = localStorage.getItem('WALLET_ADDRESS');\r\n    try {\r\n        do {\r\n            let assetRequest = await client.getAssets({ user: address, status: 'imx', collection: COLLECTION_ADDRESS, sell_orders: true });\r\n            assets = assets.concat(assetRequest.result);\r\n            assetCursor = assetRequest.cursor;\r\n\r\n        } while (assetCursor);\r\n\r\n        for (let asset of assets) {\r\n            asset.isListed = false;\r\n            if (asset.orders?.sell_orders?.length > 0) {\r\n                asset.isListed = true;\r\n            }\r\n        }\r\n    } catch (err) {\r\n        console.log(err)\r\n    }\r\n    finally {\r\n        return assets;\r\n    }\r\n\r\n}\r\n\r\n//Opens the Link SDK popup to sell an asset as the specified price\r\nexport async function sellAsset(asset, priceInEth) {\r\n    let sellParams = { amount: priceInEth, tokenId: asset.id, tokenAddress: asset.token_address };\r\n    //Throws an error if not successful\r\n    await link.sell(sellParams);\r\n}\r\n\r\n//Transfers an asset to another address\r\nexport async function transferERC721(asset, addressToSendTo) {\r\n    await link.transfer({\r\n        type: ERC721TokenType.ERC721,\r\n        tokenId: asset.id,\r\n        tokenAddress: asset.token_address,\r\n        to: addressToSendTo\r\n    });\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n///////////////////////// Marketplace Management /////////////////////////////\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * Get the cheapest active orders for the collection\r\n * @param {*} ordersCursor - optional cursor parameter \r\n * @param {*} tokenName - optional token name to filter on \r\n * @param {*} metadata - optional JSON string metadata to filter on \r\n * @returns Object containing the cheapest orders and a cursor if more orders remain\r\n */\r\nexport async function getCheapestSellOrders(pageSize, ordersCursor, metadata) {\r\n    try {\r\n        const client = await ImmutableXClient.build({ publicApiUrl: apiAddress });\r\n        const ordersRequest = await client.getOrders({\r\n            page_size: pageSize,\r\n            cursor: ordersCursor,\r\n            status: 'active',\r\n            sell_token_address: COLLECTION_ADDRESS,\r\n            sell_metadata: metadata,\r\n            order_by: 'buy_quantity',\r\n            direction: 'asc'\r\n        });\r\n        return { orders: ordersRequest.result, cursor: ordersRequest.cursor };\r\n    } catch (err) {\r\n        console.log(err)\r\n\r\n    }\r\n}\r\n\r\nexport async function getOrdersHistory(metadata, min_date) {\r\n    let ordersCursors;\r\n    let orders = [];\r\n    const client = await ImmutableXClient.build({ publicApiUrl: apiAddress });\r\n    const address = localStorage.getItem('WALLET_ADDRESS');\r\n    try {\r\n        do {\r\n            let ordersRequest = await client.getOrders({\r\n                page_size: 200,\r\n                cursor: ordersCursors,\r\n                status: 'filled',\r\n                sell_token_address: COLLECTION_ADDRESS,\r\n                sell_metadata: metadata,\r\n                order_by: 'timestamp',\r\n                direction: 'asc',\r\n                min_timestamp: min_date\r\n\r\n            });\r\n            orders = orders.concat(ordersRequest.result);\r\n            ordersCursors = ordersRequest.cursor;\r\n\r\n\r\n        } while (ordersCursors);\r\n        orders.sort((a, b) => (a.updated_timestamp.localeCompare(b.updated_timestamp)));\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n    finally {\r\n        console.log(orders)\r\n        return orders;\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} metadata \r\n * @param {*} min_date \r\n * @returns liste contenant pour chaque jour le prix moyen et le volume total\r\n */\r\nexport async function getPriceHistory(metadata, min_date) {\r\n    let h_prices = [];\r\n    let months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n    let map = new Map();\r\n    let volume;\r\n    let price;\r\n    try {\r\n        const orders = await getOrdersHistory(metadata, min_date);\r\n        console.log(orders)\r\n        orders.forEach((order) => {\r\n\r\n            let unixtime = Date.parse(order.updated_timestamp)\r\n            let time = new Date(unixtime)\r\n            let f_time = time.toLocaleDateString('en-US', { day: 'numeric', month: 'long' })\r\n            if (map.has(f_time)) {\r\n                const res = map.get(f_time);\r\n                price = (+res.price + +toEthPrice(order.buy.data.quantity))\r\n                price /= 2\r\n                volume = res.volume\r\n            }\r\n            else {\r\n                volume = 0;\r\n                price = (+toEthPrice(order.buy.data.quantity))\r\n\r\n            }\r\n            price.toFixed(6)\r\n\r\n            map.set(f_time, { price: price, volume: (volume + 1) });\r\n        });\r\n        console.log(map)\r\n        map.forEach((value, key) => {\r\n            let dict = {\r\n                time: key,\r\n                data: value\r\n            }\r\n            h_prices = h_prices.concat(dict)\r\n        })\r\n        return h_prices;\r\n    } catch (err) {\r\n        console.log(err)\r\n    }\r\n\r\n}\r\n//Opens the Link SDK popup to complete an order\r\nexport async function fillOrder(order) {\r\n    await link.buy({ orderId: order });\r\n}\r\n\r\nexport const toEthPrice = (price) => {\r\n    return (price * Math.pow(10, -18)).toFixed(6);\r\n\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n//////////////////////////////////////////////////////////////////////////////","import { useState, createContext } from 'react'\r\n\r\nexport const LoggedContext = createContext()\r\n\r\nexport const LoggedProvider = ({ children }) => {\r\n    const [logged, setLogged] = useState(localStorage.getItem('WALLET_ADDRESS') !== null)\r\n\r\n    return (\r\n        <LoggedContext.Provider value={{ logged, setLogged }}>\r\n            {children}\r\n        </LoggedContext.Provider>\r\n    )\r\n}","import { setupAndLogin } from '../utils/ImmutableXConnection'\r\nimport { LoggedContext } from '../utils/context'\r\nimport { useEffect, useState, useContext } from 'react'\r\nimport { Redirect } from 'react-router'\r\nimport { Spinner } from 'react-bootstrap'\r\n\r\n\r\nfunction Account() {\r\n\r\n    const { logged, setLogged } = useContext(LoggedContext);\r\n    const [address, setAddress] = useState('')\r\n    const [showPopup, setPopup] = useState(false);\r\n    const [popupCard, setPopupCard] = useState(null)\r\n    const [isLoading, setLoading] = useState(true);\r\n\r\n\r\n\r\n\r\n    async function logAccount() {\r\n        setLoading(true)\r\n        if (!logged) {\r\n            try {\r\n                await setupAndLogin()\r\n                setLogged(true)\r\n            }\r\n            catch (err) {\r\n                console.log(err)\r\n                setLogged(false)\r\n            }\r\n        }\r\n        setAddress(localStorage.getItem('WALLET_ADDRESS'))\r\n        setLoading(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        logAccount();\r\n    }, [])\r\n\r\n\r\n    // return (\r\n    //     <div className=\"container\">\r\n    //         <OwnedCollection showPopup={showPopup} setPopup={setPopup} popupCard={popupCard} setPopupCard={setPopupCard} user={address} />\r\n    //         {showPopup ?\r\n    //             <OwnedPopup showPopup={showPopup} setPopup={setPopup} popupCard={popupCard} />\r\n    //             : null}\r\n    //     </div>\r\n    // )\r\n    return (\r\n        <>\r\n            {isLoading ? <div className=\"container d-flex justify-content-center\">\r\n                < Spinner animation=\"grow\" /> </div> :\r\n                <>\r\n                    <Redirect to={'/godsunchained/user/' + localStorage.getItem('WALLET_ADDRESS') + \"/wallet\"} />\r\n                </>\r\n            }\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default Account","export default __webpack_public_path__ + \"static/media/logo.aac3612d.png\";","import React from 'react';\r\nimport styled from \"styled-components\"\r\n\r\nexport const activeTab = styled.button`\r\n  border:0;\r\n  border-bottom:2px solid purple;\r\n  outline:0;\r\n  color:white;\r\n`\r\nexport const inactiveTab = styled.button`\r\n  border:0;\r\n  border-bottom:2px solid grey;\r\n  outline:0;\r\n  color:white;\r\n`\r\n\r\nexport const BackgroundWrapper = styled.div`\r\n  background-image: linear-gradient(to right, rgb(50, 50, 50) 10%, transparent), linear-gradient(to top, rgb(2, 2, 2) 1%, transparent), url(https://blog.godsunchained.com/wp-content/uploads/2019/12/atlas_header.jpg);\r\n  background-position: left top;\r\n  background-repeat: no-repeat;\r\n  color:white;\r\n\r\n`\r\n\r\nexport const Parallax = styled.div`\r\nbackground-image: linear-gradient(to right, rgb(50, 50, 50) 10%, transparent), linear-gradient(to top, rgb(2, 2, 2) 1%, transparent), url(https://blog.godsunchained.com/wp-content/uploads/2019/12/atlas_header.jpg);\r\nbackground-attachment: fixed;\r\nbackground-position: center;\r\nbackground-repeat: no-repeat;\r\nbackground-size: cover;\r\ncolor:white;\r\nmin-height: 900px;\r\nmargin-top:75px;\r\nwidth:100%;\r\n\r\n`\r\n\r\nexport const SearchBar = styled.input`\r\n  border: 0;\r\n  border-bottom: 2px solid yellow;\r\n  outline: 0;\r\n  color: white;\r\n  padding: 7px 0;\r\n  background: transparent;\r\n  transition: border-color 0.2s;\r\n  font-family: inherit;\r\n\r\n  &::placeholder{\r\n    color:white;\r\n  }\r\n\r\n`\r\n\r\n\r\nexport const SearchWrapper = styled.div`\r\n  display:flex;\r\n  justify-content:center;\r\n  padding-top:10px;\r\n  position:sticky;\r\n  z-index:100;\r\n  top:75px;\r\n  \r\n`\r\n\r\nexport const CollectionWrapper = styled.div`\r\n background: rgb(176,191,201);\r\n background: linear-gradient(90deg, rgba(176,191,201,1) 0%, rgba(115,125,158,1) 21%, rgba(113,110,163,1) 51%, rgba(56,47,115,1) 79%, rgba(21,9,78,1) 100%);\r\n\r\n`\r\n\r\nexport const CardWrapper = styled.div`\r\n  display:flex;\r\n  flex-direction: row;\r\n  margin:10px;\r\n  padding:0px;\r\n  border-radius:10px;\r\n  justify-content:center;\r\n  background:rgba(58, 74, 115, 0.15);\r\n\r\n`\r\n\r\nexport const InfoWrapper = styled.div`\r\n  padding-right:10px;\r\n  padding-left:10px;\r\n\r\n  display:flex;\r\n  justify-content:space-between\r\n`\r\n\r\nexport const ImageWrapper = styled.div`\r\ntransition: all .2s ease-in-out;\r\nborder-radius: 10px;\r\n&:hover{\r\n    transform:scale(1.1);\r\n}\r\n`\r\n\r\nexport const BuyButton = styled.button`\r\n  background-color: green;\r\n  width: 90px;\r\n  height: 30px;\r\n  border: none;\r\n  border-radius: 10px;\r\n  color: white;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  display: inline-block;\r\n  font-size: 12px;\r\n`;\r\n\r\nexport const SellButton = styled.button`\r\n  background-color: red;\r\n  width: 90px;\r\n  height: 30px;\r\n  border: none;\r\n  border-radius: 10px;\r\n  color: white;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  display: inline-block;\r\n  font-size: 12px;\r\n  margin-left:10px;\r\n`;\r\n\r\nexport const DefaultButton = styled.button`\r\nbackground-color: grey;\r\n  width: 90px;\r\n  height: 30px;\r\n  border: none;\r\n  border-radius: 10px;\r\n  color: white;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  display: inline-block;\r\n  font-size: 12px;\r\n  margin-left:10px;\r\n`\r\n\r\nexport const SpinnerWrapper = styled.div`\r\n  padding-right: 15px;\r\n  padding-left: 15px;\r\n  margin-right: auto;\r\n  margin-left: auto;\r\n  margin-top:10%;\r\n  display:flex;\r\n  justify-content : center;\r\n`","import '../styles/Header.css'\r\nimport styled from 'styled-components'\r\nimport Logo from '../assets/logo.png'\r\nimport { Link } from 'react-router-dom'\r\nimport { setupAndLogin, logout } from '../utils/ImmutableXConnection'\r\nimport { useContext } from 'react'\r\nimport { LoggedContext } from '../utils/context'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { DefaultButton, SearchBar } from '../styles/GlobalStyle'\r\nimport { useState } from 'react'\r\n\r\nfunction Header() {\r\n\r\n\r\n    const NavContainer = styled.nav`\r\n  padding: 30px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`\r\n    const StyledLink = styled(Link)`\r\n  padding: 10px 15px;\r\n  color: #c4fffc;\r\n  text-decoration: none;\r\n  font-size: 18px;\r\n  text-align: center;\r\n`\r\n\r\n    const HeaderWrapper = styled.nav`\r\n    background-image: linear-gradient(to right, rgb(50, 50, 50) 10%, transparent), linear-gradient(to top, rgb(2, 2, 2) 1%, transparent), url(https://blog.godsunchained.com/wp-content/uploads/2019/12/atlas_header.jpg);\r\n    background-attachment: fixed;\r\n    background-position: center;\r\n    background-repeat: no-repeat;\r\n    background-size: cover;\r\n    display:flex;\r\n    align-items: center;\r\n    max-height: 75px;\r\n    justify-content: space-between;\r\n    position:fixed;\r\n    z-index:100;\r\n    top: 0;\r\n    width: 100%;\r\n    \r\n    \r\n    \r\n`\r\n\r\n    const { logged, setLogged } = useContext(LoggedContext);\r\n    const [search, setSearch] = useState('')\r\n    const history = useHistory();\r\n\r\n    async function handleConnect() {\r\n        if (logged) {\r\n            alert(\"user already connected\")\r\n        }\r\n        else {\r\n            async function logAccount() {\r\n                try {\r\n                    await setupAndLogin()\r\n                    setLogged(true)\r\n                }\r\n                catch (err) {\r\n                    console.log(err)\r\n                    setLogged(false)\r\n                }\r\n            }\r\n            logAccount();\r\n        }\r\n    }\r\n\r\n    const handleDisconnect = () => {\r\n        if (logged) {\r\n            logout();\r\n            setLogged(false)\r\n            let path = `/browse`;\r\n            history.push(path);\r\n            alert(\"user disconnecterd\")\r\n        }\r\n        else {\r\n            alert(\"user not logged in\")\r\n        }\r\n    }\r\n\r\n    const handleInput = (e) => {\r\n        setSearch(e.target.value)\r\n    }\r\n\r\n\r\n    return (\r\n        <HeaderWrapper>\r\n            <div>\r\n                <img src={Logo} className=\"mainLogo\" alt=\"mainLogo\" />\r\n            </div>\r\n            <div>\r\n\r\n                <div className=\" d-flex justify-content-center\">\r\n                    <SearchBar type=\"text\" placeholder=\"Enter eth address\" onChange={handleInput} />\r\n                    <StyledLink className=\"link\" to={`/godsunchained/user/${search}/wallet`} >Search user</StyledLink>\r\n                </div>\r\n\r\n            </div>\r\n            <NavContainer>\r\n                {logged ? <DefaultButton onClick={handleDisconnect}>Disconnect</DefaultButton> : (<DefaultButton onClick={handleConnect}>Connect</DefaultButton>)}\r\n                <StyledLink className=\"link\" to=\"/godsunchained/browse\" >Browse Cards</StyledLink>\r\n                <StyledLink className=\"link\" to=\"/godsunchained/account\">Your Account</StyledLink>\r\n                <StyledLink className=\"link\" to=\"/godsunchained/discounts\">Discounts</StyledLink>\r\n            </NavContainer>\r\n        </HeaderWrapper>\r\n    )\r\n}\r\n\r\nexport default Header","import { ImageWrapper } from '../../styles/GlobalStyle'\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nfunction DiscountItem({ proto }) {\r\n\r\n\r\n    const handleClick = () => {\r\n\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <li key={proto.token_proto}>\r\n                <ImageWrapper>\r\n                    <Link to={`/godsunchained/protos/${proto.token_proto}`}>\r\n                        <img className='nft-item-cover' src={`https://card.godsunchained.com/?id=${proto.token_proto.split('-')[0]}&q=${proto.token_proto.split('-')[1]}`} alt={`${proto.token_proto} cover`} onClick={handleClick} />\r\n                        <span>-{proto.diff}%</span>\r\n                    </Link>\r\n                </ImageWrapper>\r\n            </li>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DiscountItem","import { Link } from '@imtbl/imx-link-sdk';\r\nimport { ImmutableXClient } from '@imtbl/imx-link-lib';\r\nimport { ERC721TokenType, ETHTokenType } from '@imtbl/imx-link-types';\r\nimport Axios from 'axios';\r\nimport { createPortal } from 'react-dom';\r\n\r\n//api endpoint de immuX\r\nconst apiAddress = 'https://api.x.immutable.com/v1';\r\n//adresse ETH de la collection GodsUnchained\r\nconst COLLECTION_ADDRESS = '0xacb3c6a43d15b907e8433077b6d38ae40936fe2c';\r\n\r\n\r\n\r\n/**\r\n * \r\n * @param {*} price \r\n * @returns {string} La conversion du prix en Gwei en prix en eth\r\n */\r\nexport const toEthPrice = (price) => {\r\n    return (price * Math.pow(10, -18)).toFixed(6);\r\n\r\n}\r\n\r\nexport const getHistoricalEthPrice = async () => {\r\n    let url = 'https://api.coingecko.com/api/v3/coins/ethereum/market_chart?vs_currency=usd&days=max&interval=daily'\r\n    try {\r\n        const response = await Axios.get(url);\r\n        const result = response.data;\r\n        return result.prices;\r\n    } catch (err) {\r\n        console.log(err)\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @returns {*} le prix de l'eth en USD\r\n */\r\nexport const getEthPrice = async () => {\r\n    let url = 'https://api.coingecko.com/api/v3/simple/price'\r\n    try {\r\n        const response = await Axios.get(url,\r\n            {\r\n                params:\r\n                {\r\n                    \"ids\": \"ethereum\",\r\n                    \"vs_currencies\": \"usd\",\r\n                }\r\n            });\r\n        const result = response.data;\r\n        return result.ethereum.usd;\r\n    } catch (err) {\r\n        console.log(err)\r\n    }\r\n}\r\n\r\n\r\n\r\n/**\r\n * \r\n * @returns {string}  une liste contenant tous les protos , metadata et leurs prix minimum\r\n */\r\nexport async function getAllProtos() {\r\n\r\n    const client = await ImmutableXClient.build({ publicApiUrl: apiAddress });\r\n    const ethPrice = await getEthPrice();\r\n    let config = {\r\n        headers: { 'x-api-key': 'Np8BV2d5QR9TSFEr9EvF66FWcJf0wIxy2qBpOH6s' },\r\n        params: {\r\n            'tokenAddress': '0xacb3c6a43d15b907e8433077b6d38ae40936fe2c'\r\n        },\r\n    }\r\n    let url = 'https://gy2601wgv6.execute-api.us-east-1.amazonaws.com/dev/all-orders'\r\n    const response = await Axios(url, config)\r\n    const protos = response.data\r\n    protos.forEach((proto) => proto.price = (proto.takerAssetAmount * ethPrice * Math.pow(10, -18)).toFixed(2))\r\n    return protos;\r\n\r\n\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} metadata au format JSON du sell_token\r\n * @returns les 5 ordres de ventes les moins chers\r\n */\r\nexport async function getCheapestSellOrders(metadata) {\r\n    const client = await ImmutableXClient.build({ publicApiUrl: apiAddress });\r\n    const ordersRequest = await client.getOrders({\r\n        page_size: 5,\r\n        status: 'active',\r\n        sell_token_address: '0xacb3c6a43d15b907e8433077b6d38ae40936fe2c',\r\n        sell_metadata: metadata,\r\n        order_by: 'buy_quantity',\r\n        direction: 'asc'\r\n    });\r\n    return { orders: ordersRequest.result };\r\n}\r\n\r\n\r\n/**\r\n * \r\n * @param {*} metadata au format JSON du sell_token\r\n * Convertit le prix des ordres retours de getCheapestSellOrders en USD\r\n * @returns les 5 ordres de vente les moins chers, prix converti en USD\r\n */\r\nexport async function getCheapestUSDSellOrders(metadata) {\r\n    const { orders } = await getCheapestSellOrders(metadata)\r\n    const ethPrice = await getEthPrice();\r\n    orders.forEach((order) => {\r\n        order.buy.data.quantity = (order.buy.data.quantity * Math.pow(10, -18) * ethPrice).toFixed(2)\r\n    })\r\n    return { orders: orders }\r\n}\r\n\r\n\r\n/**\r\n * \r\n * @param {*} metadata au format JSON du sell_token\r\n * @param {*} min_date à partir de quand on récupère les données (1 mois max)\r\n * @returns liste des ventes triées par updated_timestamp croissant\r\n */\r\nexport async function getOrdersHistory(metadata, min_date) {\r\n    let ordersCursors;\r\n    let orders = [];\r\n    const client = await ImmutableXClient.build({ publicApiUrl: apiAddress });\r\n    //Requête par timestamp CROISSANT pour avoir les ordres dans l'ordre chronologique\r\n    const address = localStorage.getItem('WALLET_ADDRESS');\r\n    try {\r\n        do {\r\n            let ordersRequest = await client.getOrders({\r\n                page_size: 200,\r\n                cursor: ordersCursors,\r\n                status: 'filled',\r\n                sell_token_address: COLLECTION_ADDRESS,\r\n                sell_metadata: metadata,\r\n                order_by: 'timestamp',\r\n                direction: 'asc',\r\n                min_timestamp: min_date\r\n\r\n            });\r\n            orders = orders.concat(ordersRequest.result);\r\n            ordersCursors = ordersRequest.cursor;\r\n\r\n\r\n        } while (ordersCursors);\r\n        //on trie la liste selon le updated_timestamp croissant\r\n        orders.sort((a, b) => (a.updated_timestamp.localeCompare(b.updated_timestamp)));\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n    finally {\r\n        return orders;\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} metadata au format JSON du sell_token\r\n * @returns \r\n */\r\nexport async function getLastTrades(metadata) {\r\n    const client = await ImmutableXClient.build({ publicApiUrl: apiAddress });\r\n    //Requête par timestamp DECROISSANT pour avoir les derniers ordres publiés\r\n    const ordersRequest = await client.getOrders({\r\n        page_size: 30,\r\n        status: 'filled',\r\n        sell_token_address: '0xacb3c6a43d15b907e8433077b6d38ae40936fe2c',\r\n        sell_metadata: metadata,\r\n        order_by: 'timestamp',\r\n        direction: 'desc'\r\n    });\r\n    //trier par updated_timestamp décroissant ()\r\n    ordersRequest.result.sort((a, b) => (b.updated_timestamp.localeCompare(a.updated_timestamp)));\r\n    return ordersRequest.result.slice(0, 5);\r\n\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} id \r\n * @returns infos sur l'asset en question : {id, owner, name, metadata, creation time...}\r\n */\r\nexport async function getAssetInfo(id) {\r\n\r\n    let url = `https://api.x.immutable.com/v1/assets/${COLLECTION_ADDRESS}/${id}`\r\n    const response = await Axios(url)\r\n    const infos = response.data\r\n    return infos.user\r\n}\r\nexport async function getLastTradesData(metadata) {\r\n    const ethcurrentPrice = await getEthPrice();\r\n    const ethPriceHistory = await getHistoricalEthPrice()\r\n    let datas = [];\r\n    let ethPrice;\r\n    try {\r\n        const trades = await getLastTrades(metadata);\r\n        for (const trade of trades) {\r\n            let tokenID = trade.sell.data.id;\r\n            let owner = await getAssetInfo(tokenID)\r\n            let unix_time = Date.parse(trade.updated_timestamp)\r\n            console.log(unix_time)\r\n            unix_time = new Date(unix_time).setUTCHours(0, 0, 0, 0)\r\n            let found = ethPriceHistory.find(element => element[0] === unix_time)\r\n            ethPrice = found === undefined ? ethcurrentPrice : found[1]\r\n            let price = (trade.buy.data.quantity * Math.pow(10, -18) * ethPrice).toFixed(2)\r\n            datas = datas.concat({ tokenID: tokenID, owner: owner, price: price, uptime: (Date.parse(trade.updated_timestamp) - Date.parse(trade.timestamp)) / 1000 })\r\n        }\r\n\r\n        return datas;\r\n    } catch (err) { console.log(err) }\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} metadata \r\n * @param {*} min_date \r\n * @returns liste contenant pour chaque jour le prix moyen et le volume total\r\n */\r\nexport async function getAvgDailyPrice(metadata, min_date) {\r\n    let h_prices = [];\r\n    let months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n    let map = new Map();\r\n    let volume;\r\n    let price;\r\n    try {\r\n        const orders = await getOrdersHistory(metadata, min_date);\r\n        orders.forEach((order) => {\r\n\r\n            let unixtime = Date.parse(order.updated_timestamp)\r\n            let time = new Date(unixtime)\r\n            let f_time = time.toLocaleDateString('en-US', { day: 'numeric', month: 'long' })\r\n            let unix_time = time.setUTCHours(0, 0, 0, 0)\r\n            if (map.has(f_time)) {\r\n                const res = map.get(f_time);\r\n                price = (+res.price + +toEthPrice(order.buy.data.quantity))\r\n                price /= 2\r\n                volume = res.volume\r\n            }\r\n            else {\r\n                volume = 0;\r\n                price = (+toEthPrice(order.buy.data.quantity))\r\n\r\n            }\r\n            price.toFixed(6)\r\n\r\n            map.set(f_time, { price: price, volume: (volume + 1), unix_time });\r\n        });\r\n        map.forEach((value, key) => {\r\n            let dict = {\r\n                time: key,\r\n                data: value\r\n\r\n            }\r\n            h_prices = h_prices.concat(dict)\r\n        })\r\n        return h_prices;\r\n    } catch (err) {\r\n        console.log(err)\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} metadata \r\n * @param {*} min_date date à partir de laquelle on récupère les données (30j max)\r\n * @returns liste contenant les infos liées à chaque ordre de vente rempli.\r\n */\r\nexport async function getAllOrdersHistory(metadata, min_date) {\r\n    let h_prices = [];\r\n    let map = new Map();\r\n    let volume;\r\n    let price;\r\n    try {\r\n        const orders = await getOrdersHistory(metadata, min_date);\r\n        console.log(orders)\r\n        orders.forEach((order) => {\r\n\r\n            let unixtime = Date.parse(order.updated_timestamp)\r\n            let time = new Date(unixtime)\r\n            let f_time = time.toLocaleDateString('en-US', { day: 'numeric', month: 'long' })\r\n            let unix_time = time.setUTCHours(0, 0, 0, 0)\r\n            price = (+toEthPrice(order.buy.data.quantity))\r\n            price.toFixed(6)\r\n            let dict = {\r\n                time: f_time,\r\n                data: {\r\n                    price: price,\r\n                    volume: 0,\r\n                    unix_time: unix_time\r\n                },\r\n            }\r\n            h_prices = h_prices.concat(dict)\r\n        });\r\n        return h_prices;\r\n    } catch (err) {\r\n        console.log(err)\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @returns liste contenant les infos de chaque carte actuellement en promotion\r\n */\r\nexport const getDiscounts = async () => {\r\n    let url = 'https://gumarkets.freeboxos.fr:5000/discounts'\r\n    const response = await Axios(url)\r\n    const result = response.data\r\n    return result;\r\n\r\n}\r\n\r\n\r\ngetCheapestUSDSellOrders();","import { useState, useEffect } from 'react'\r\nimport DiscountsCollection from \"../components/Discounts/DiscountsCollection\"\r\n\r\nimport { fetchDiscounts } from '../utils/getProtoCollection'\r\nimport { CollectionWrapper } from '../styles/GlobalStyle'\r\n\r\nfunction Discounts() {\r\n\r\n    const [showPopup, setPopup] = useState(false);\r\n    const [popupCard, setPopupCard] = useState(null)\r\n\r\n    console.log(popupCard)\r\n\r\n    return (\r\n        < >\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Discounts","import { ImageWrapper, CardWrapper, InfoWrapper } from '../styles/GlobalStyle'\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nfunction Item({ proto }) {\r\n\r\n\r\n    const handleClick = () => {\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <li key={proto.token_proto}>\r\n                <ImageWrapper>\r\n                    <Link to={`/godsunchained/protos/${proto.token_proto}`}>\r\n                        <img className='nft-item-cover' src={`https://card.godsunchained.com/?id=${proto.token_proto.split('-')[0]}&q=${proto.token_proto.split('-')[1]}`} alt={`${proto.token_proto} cover`} onClick={handleClick} />\r\n                    </Link>\r\n                </ImageWrapper>\r\n                {proto.price !== undefined &&\r\n                    <InfoWrapper>\r\n                        <span>\r\n                            {JSON.parse(proto.metadata).name}\r\n                        </span>\r\n                        <span>\r\n                            {proto.price}$\r\n                        </span>\r\n                    </InfoWrapper>\r\n                }\r\n\r\n            </li>\r\n\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Item","import { useState, useEffect } from 'react'\r\nimport Item from './Item'\r\nimport '../styles/Collection.css'\r\nimport { Spinner } from 'react-bootstrap'\r\nimport { getAllProtos } from '../utils/apiCalls'\r\nimport { SearchWrapper, Parallax, CardWrapper, SearchBar } from '../styles/GlobalStyle'\r\nimport styled from 'styled-components'\r\n\r\nfunction Collection({ showPopup, setPopup }) {\r\n    const [allProtos, setAllProtos] = useState([])\r\n    const [isLoading, setLoading] = useState(true);\r\n    const [searchParam, setSearchParam] = useState(\"\");\r\n\r\n\r\n\r\n    async function initPage() {\r\n        try {\r\n            setLoading(true)\r\n            const myProtos = await getAllProtos();\r\n            setAllProtos(myProtos)\r\n            console.log(myProtos)\r\n            setLoading(false)\r\n        } catch (err) { console.log(err) }\r\n    }\r\n\r\n    useEffect(() => {\r\n        initPage();\r\n    }, [])\r\n\r\n\r\n    const handleInput = (e) => {\r\n        setSearchParam(e.target.value.toLowerCase())\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <SearchWrapper className=\"container d-flex justify-content-center\">\r\n                <SearchBar type=\"text\" placeholder=\"Search a card\" onChange={handleInput} />\r\n            </SearchWrapper>\r\n            {isLoading ?\r\n                <div className=\"container d-flex justify-content-center\">\r\n                    <Spinner animation=\"grow\" />\r\n                </div>\r\n                :\r\n                <ul className=\"list-unstyled\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"row\" style={{ width: \"100%\" }}>\r\n                            {allProtos.map((proto) => {\r\n\r\n                                return (\r\n\r\n                                    JSON.parse(proto.metadata).name !== undefined && JSON.parse(proto.metadata).name.toLowerCase().includes(searchParam) &&\r\n                                    <CardWrapper className=\"col\">\r\n                                        <Item key={`${proto.token_proto}`} proto={proto} />\r\n                                    </CardWrapper>\r\n\r\n                                )\r\n                            }\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </ul>\r\n            }\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default Collection","import { useState, useEffect } from 'react'\r\nimport Collection from \"../components/Collection\"\r\nimport { fetchProtoCollection } from '../utils/getProtoCollection'\r\nimport { getAllProtos } from '../utils/apiCalls'\r\nimport { CollectionWrapper, BackgroundWrapper } from '../styles/GlobalStyle'\r\n\r\nfunction Browse() {\r\n\r\n    //Dans la page Browse, on affiche la totalité des ordres (uniques) en \r\n\r\n\r\n    return (\r\n        <div>\r\n            <Collection />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Browse","import {\r\n    ComposedChart,\r\n    Line,\r\n    Area,\r\n    Bar,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    Legend,\r\n    Scatter,\r\n    ResponsiveContainer,\r\n    Label,\r\n} from 'recharts';\r\nimport { getEthPrice, getHistoricalEthPrice } from '../utils/apiCalls.js';\r\nimport { getPriceHistory } from '../utils/ImmutableXConnection.js'\r\nimport { getAllOrdersHistory, getAvgDailyPrice } from '../utils/apiCalls.js';\r\nimport { useState, useEffect } from 'react'\r\nimport { Spinner } from 'react-bootstrap';\r\nimport { SpinnerWrapper } from '../styles/GlobalStyle'\r\n\r\nfunction Chart({ proto, quality, type }) {\r\n    const [history, setHistory] = useState([])\r\n    const [isLoading, setLoading] = useState(true);\r\n\r\n    const Init = async (proto, quality, min_date, type) => {\r\n        setLoading(true)\r\n        //get price history\r\n        const json = JSON.stringify(\r\n            {\r\n                \"proto\": [`${proto}`],\r\n                \"quality\": [`${quality}`]\r\n            }\r\n        );\r\n        const ethPriceHistory = await getHistoricalEthPrice()\r\n        const ethcurrentPrice = await getEthPrice();\r\n        let ethprice;\r\n\r\n        if (type === \"month-avg\") {\r\n            const hprices = await getAvgDailyPrice(json, min_date)\r\n            hprices.forEach((elem) => {\r\n                let found = ethPriceHistory.find(element => element[0] === elem.data.unix_time)\r\n                ethprice = found === undefined ? ethcurrentPrice : found[1]\r\n                elem.data.price = +(elem.data.price * ethprice).toFixed(2)\r\n            })\r\n            console.log(hprices)\r\n            setHistory(hprices)\r\n        }\r\n        else if (type === \"month-detailed\") {\r\n            const hprices = await getAllOrdersHistory(json, min_date)\r\n            hprices.forEach((elem) => {\r\n                let found = ethPriceHistory.find(element => element[0] === elem.data.unix_time)\r\n                ethprice = found === undefined ? ethcurrentPrice : found[1]\r\n                elem.data.price = +(elem.data.price * ethprice).toFixed(2)\r\n            })\r\n            setHistory(hprices)\r\n        }\r\n        else if (type === \"week-detailed\") {\r\n            const hprices = await getAllOrdersHistory(json, min_date)\r\n            hprices.forEach(async (elem) => {\r\n                let found = ethPriceHistory.find(element => element[0] === elem.data.unix_time)\r\n                ethprice = found === undefined ? ethcurrentPrice : found[1]\r\n                elem.data.price = +(elem.data.price * ethprice).toFixed(2)\r\n            })\r\n            setHistory(hprices)\r\n        }\r\n\r\n        setLoading(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        let min_date;\r\n        switch (type) {\r\n            case (\"month-avg\"):\r\n                min_date = new Date()\r\n                min_date.setMonth(min_date.getMonth() - 1)\r\n                min_date = min_date.toISOString();\r\n                break;\r\n            case \"week-detailed\":\r\n                min_date = new Date()\r\n                min_date.setTime(min_date.getTime() - 7 * 24 * 60 * 60 * 1000)\r\n                min_date = min_date.toISOString();\r\n                break;\r\n            case (\"month-detailed\"):\r\n                min_date = new Date()\r\n                min_date.setMonth(min_date.getMonth() - 1)\r\n                min_date = min_date.toISOString();\r\n                break;\r\n            default:\r\n                console.log(\"===DEFAULT===\", type)\r\n                min_date = undefined;\r\n        }\r\n        Init(proto, quality, min_date, type)\r\n\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n\r\n            {isLoading ?\r\n                <SpinnerWrapper>\r\n                    <Spinner animation=\"grow\" /> </SpinnerWrapper>\r\n                :\r\n                <div className=\"d-flex align-items-center\">\r\n                    <ComposedChart\r\n                        width={500}\r\n                        height={400}\r\n                        data={history}\r\n                        margin={{\r\n                            top: 20,\r\n                            right: 20,\r\n                            bottom: 20,\r\n                            left: 20,\r\n                        }}\r\n                    >\r\n\r\n                        <XAxis dataKey=\"time\" stroke=\"#F2F2F3\" />\r\n                        <YAxis yAxisId=\"left\" name=\"price\" dataKey=\"data.price\" stroke=\"#D6DBDF\">\r\n                            <Label angle={270} position='left' style={{ textAnchor: 'middle', fill: \"#F4F6F7\" }} >\r\n                                USD price\r\n                            </Label>\r\n                        </YAxis>\r\n                        <YAxis yAxisId=\"right\" name=\"volume\" dataKey=\"data.volume\" orientation=\"right\" domain={[0, dataMax => (dataMax * 5)]} stroke=\"#D6DBDF\">\r\n                            <Label angle={90} position='right' style={{ textAnchor: 'middle', fill: \"#F4F6F7\" }}>\r\n                                Volume\r\n                            </Label>\r\n                        </YAxis>\r\n                        <Tooltip contentStyle={{ \"background-color\": \"rgba(0, 129, 189, 0.2)\" }} wrapperStyle={{ color: \"white\" }} itemStyle={{ color: \"white\" }} />\r\n                        <Legend />\r\n                        <Line yAxisId=\"left\" dot={false} name=\"price\" type=\"monotone\" dataKey=\"data.price\" stroke=\"#A9DFBF \" />\r\n                        <Bar yAxisId=\"right\" name=\"volume\" dataKey=\"data.volume\" barSize={5} fill=\"#AF7AC5\" />\r\n\r\n                    </ComposedChart>\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Chart","\r\nimport { useState, useEffect } from 'react'\r\nimport { getLastTradesData, getOrdersHistory, getLastTrades } from '../utils/apiCalls'\r\nimport { Link } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nfunction NewOwners({ proto, quality }) {\r\n\r\n    const WhiteText = styled.table`\r\n        color:white;\r\n\r\n    `\r\n\r\n    const [trades, setTrades] = useState([])\r\n\r\n    async function init() {\r\n        try {\r\n\r\n            const json = JSON.stringify(\r\n                {\r\n                    \"proto\": [`${proto}`],\r\n                    \"quality\": [`${quality}`]\r\n                }\r\n            );\r\n            const tradesData = await getLastTradesData(json);\r\n            setTrades(tradesData.slice(0, 5))\r\n        } catch (err) { console.log(err) }\r\n    }\r\n\r\n    useEffect(() => {\r\n        init();\r\n        console.log(trades)\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <div>\r\n            <WhiteText className=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">Owner</th>\r\n                        <th scope=\"col\">Buy price</th>\r\n                        <th scope=\"col\">available time</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {trades.map((trade) => (\r\n                        <tr>\r\n\r\n                            <td><Link to={`/godsunchained/user/${trade.owner}/history?type=all`}>\r\n                                {trade.owner}\r\n                            </Link>\r\n                            </td>\r\n                            <td>{trade.price}</td>\r\n                            <td>{trade.uptime}</td>\r\n                        </tr>\r\n                    ))\r\n                    }\r\n                </tbody>\r\n            </WhiteText>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NewOwners;","import styled from \"styled-components\";\r\nimport Chart from '../Chart'\r\nimport { BuyButton } from '../../styles/GlobalStyle'\r\nimport { fillOrder } from '../../utils/ImmutableXConnection'\r\nimport '../../styles/details.css'\r\n\r\n\r\nfunction GeneralTab({ proto, quality, id, orders, price, getQuality }) {\r\n\r\n    const Pcontainer = styled.div`\r\n    display:flex;\r\n    flex-direction:row;\r\n    justify-content : center;\r\n    align-items:center;\r\n    @media (max-width: 900px) {\r\n      flex-direction: column;\r\n    }\r\n  `\r\n\r\n    async function handleBuy(e) {\r\n        try {\r\n            await fillOrder(e.target.value);\r\n        }\r\n        catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Pcontainer>\r\n                <img className='nft-item-cover' src={`https://card.godsunchained.com/?id=${proto}&q=${quality}`} alt={`${id} cover`} />\r\n                <Chart proto={proto} quality={getQuality(quality)} type={\"month-avg\"} />\r\n\r\n            </Pcontainer>\r\n            <div className=\"d-flex justify-content-center\">\r\n                <p>For sale:\r\n                    {orders.map((order) => {\r\n                        return (\r\n                            <p><BuyButton value={order.order_id} onClick={handleBuy}>{order.buy.data.quantity} USD </BuyButton></p>\r\n                        )\r\n                    }\r\n                    )}</p>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default GeneralTab","import styled from \"styled-components\";\r\nimport Chart from '../Chart'\r\nimport { BuyButton } from '../../styles/GlobalStyle'\r\nimport { fillOrder } from '../../utils/ImmutableXConnection'\r\nimport '../../styles/details.css'\r\nimport NewOwners from \"../NewOwners\";\r\n\r\n\r\nfunction DetailedTab({ proto, quality, id, orders, price, getQuality }) {\r\n\r\n    const Pcontainer = styled.div`\r\n    display:flex;\r\n    flex-direction:row;\r\n    justify-content : center;\r\n    align-items:center;\r\n    @media (max-width: 900px) {\r\n      flex-direction: column;\r\n    }\r\n  `\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className=\"d-flex align-items-center\">\r\n                <img className='nft-item-cover' src={`https://card.godsunchained.com/?id=${proto}&q=${quality}`} alt={`${id} cover`} />\r\n                <div>\r\n                    <span>Last trades : </span>\r\n\r\n                    <NewOwners proto={proto} quality={getQuality(quality)} />\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <Pcontainer>\r\n                <Chart proto={proto} quality={getQuality(quality)} type={\"month-detailed\"} />\r\n                <Chart proto={proto} quality={getQuality(quality)} type={\"week-detailed\"} />\r\n\r\n            </Pcontainer>\r\n\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default DetailedTab","import { useParams } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { getCheapestUSDSellOrders } from '../utils/apiCalls'\r\nimport { Modal, Button, Spinner } from 'react-bootstrap';\r\nimport styled from \"styled-components\";\r\nimport Chart from '../components/Chart'\r\nimport { BuyButton, Parallax } from '../styles/GlobalStyle'\r\nimport { fillOrder } from '../utils/ImmutableXConnection'\r\nimport '../styles/details.css'\r\nimport NewOwners from \"../components/NewOwners\";\r\nimport GeneralTab from '../components/Details/GeneralTab'\r\nimport DetailedTab from '../components/Details/DetailedTab'\r\n\r\n\r\nfunction Details() {\r\n\r\n\r\n\r\n\r\n    const Pcontainer = styled.div`\r\n    display:flex;\r\n    flex-direction:row;\r\n    justify-content : center;\r\n    align-items:center;\r\n    @media (max-width: 900px) {\r\n      flex-direction: column;\r\n    }\r\n  `\r\n\r\n    var qualities = {\r\n        4: \"Meteorite\",\r\n        3: \"Shadow\",\r\n        2: \"Gold\",\r\n        1: \"Diamond\"\r\n    };\r\n\r\n    const getQuality = (key) => { return qualities[key] }\r\n\r\n    const { id } = useParams();\r\n    const [proto, quality] = id.split('-')\r\n\r\n    const [price, setPrice] = useState(null);\r\n    const [error, setError] = useState(false);\r\n    const [isLoading, setLoading] = useState(false);\r\n    const [orders, setOrders] = useState([])\r\n\r\n    const [toggleState, setToggleState] = useState(1);\r\n    const toggleTab = (index) => {\r\n        setToggleState(index);\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n    async function init() {\r\n        setLoading(true)\r\n        try {\r\n            setError(false)\r\n            //get best price for this card\r\n            const json = JSON.stringify(\r\n                {\r\n                    \"proto\": [`${proto}`],\r\n                    \"quality\": [`${getQuality(quality)}`]\r\n                }\r\n            );\r\n            let { orders } = await getCheapestUSDSellOrders(json)\r\n            setOrders(orders)\r\n            setPrice(orders[0].buy.data.quantity)\r\n            if (orders[0].orderID === null) {\r\n                setError(true)\r\n            }\r\n\r\n        } catch (err) {\r\n            setError(true);\r\n            console.log(err)\r\n        }\r\n        finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, [])\r\n\r\n\r\n\r\n    return (\r\n        <Parallax>\r\n            {isLoading ?\r\n                <div className=\"container d-flex justify-content-center\">\r\n                    <Spinner animation=\"grow\" /> </div>\r\n                :\r\n                error ? <h5>this card is not available for trade</h5> :\r\n\r\n                    <div>\r\n                        <div className=\"d-flex justify-content-center \" style={{ \"background-color\": \"transparent\" }}>\r\n                            <button\r\n                                className={toggleState === 1 ? \"activeTab\" : \"inactiveTab\"}\r\n                                onClick={() => toggleTab(1)}\r\n                            >\r\n                                General info\r\n                            </button>\r\n                            <button\r\n                                className={toggleState === 2 ? \"activeTab\" : \"inactiveTab\"}\r\n                                onClick={() => toggleTab(2)}\r\n                            >\r\n                                Detailed Info\r\n                            </button>\r\n\r\n                        </div>\r\n\r\n                        <div className=\"content-tabs\" style={{ \"background-color\": \"transparent\" }}>\r\n                            <div\r\n                                className={toggleState === 1 ? \"content  active-content\" : \"content\"} style={{ \"background-color\": \"transparent\" }}\r\n                            >\r\n                                <GeneralTab proto={proto} quality={quality} id={id} orders={orders} price={price} getQuality={getQuality} />\r\n\r\n                            </div>\r\n                            <div\r\n                                className={toggleState === 2 ? \"content  active-content\" : \"content\"} style={{ \"background-color\": \"transparent\" }}\r\n                            >\r\n                                <DetailedTab proto={proto} quality={quality} id={id} orders={orders} price={price} getQuality={getQuality} />\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n            }\r\n        </Parallax>\r\n    )\r\n\r\n}\r\n\r\nexport default Details","import { useState, useEffect } from 'react'\r\nimport axios from \"axios\";\r\nimport { getEthPrice, getAllProtos, getHistoricalEthPrice } from '../../utils/apiCalls'\r\nimport totalprotos from '../../assets/totalprotos.json'\r\n\r\n\r\nconst useGetNFTs = (address) => {\r\n\r\n\r\n    const [data, setData] = useState([]);\r\n    //const [allPrices, setAllPrices] = useState([]);\r\n    const [isLoading, setLoading] = useState(true);\r\n    const [statePoints, setPoints] = useState(0)\r\n\r\n    var points = 0;\r\n\r\n    /**\r\n     * Retourne la liste des prix de chaque proto\r\n     */\r\n    const getAllPrices = async () => {\r\n        const ethPrice = localStorage.getItem('ethPrice')\r\n        const protos = await getAllProtos();\r\n        protos.forEach((proto) => proto.price = (proto.takerAssetAmount * Math.pow(10, -18) * ethPrice).toFixed(2))\r\n        return protos\r\n    }\r\n    /**\r\n     * \r\n     * @returns {data} la liste de tous les NFT présents sur ImmuX pour l'utilisateur sous forme\r\n     * \"result\": [\r\n            {\r\n                \"token_address\": \"0xacb3c6a43d15b907e8433077b6d38ae40936fe2c\",\r\n                \"id\": \"0x03c53584ad15429d51fa2460e2578868bccd1ce2628741e573837c2a01e198e1\",\r\n                \"user\": \"0x8205aa128988277979ea0fe327f48ce9682f7cc4\",\r\n                \"status\": \"imx\",\r\n                \"uri\": null,\r\n                \"name\": \"Blessing of Death\",\r\n                \"description\": null,\r\n                \"image_url\": \"https://card.godsunchained.com/?id=932&q=4\",\r\n                \"metadata\": {\r\n                    \"god\": \"death\",\r\n                    \"set\": \"trial\",\r\n                    \"mana\": 2,\r\n                    \"name\": \"Blessing of Death\",\r\n                    \"type\": \"card\",\r\n                    \"image\": \"https://card.godsunchained.com/?id=932&q=4\",\r\n                    \"proto\": 932,\r\n                    \"attack\": 0,\r\n                    \"effect\": \"Your relic gains: \\\"Whenever a creature dies, gain 3 favor.\\\"\",\r\n                    \"health\": 0,\r\n                    \"rarity\": \"common\",\r\n                    \"quality\": \"Meteorite\"\r\n                },\r\n                \"collection\": {\r\n                    \"name\": \"Gods Unchained\",\r\n                    \"icon_url\": null\r\n                },\r\n                \"created_at\": \"2021-03-29T18:53:35.608486Z\",\r\n                \"updated_at\": \"2021-07-22T06:23:26.350774Z\"\r\n            },\r\n            ]\r\n     *  \r\n     */\r\n    const getAllAssets = async () => {\r\n        let cursor;\r\n        let data = [];\r\n        const ethPrice = await getEthPrice();\r\n        localStorage.setItem('ethPrice', ethPrice)\r\n\r\n        do {\r\n            let config = {\r\n                params: {\r\n                    'cursor': cursor,\r\n                    'user': address,\r\n                    'order_by': 'updated_at',\r\n                    'direction': 'desc',\r\n                },\r\n            }\r\n            const url = 'https://api.x.immutable.com/v1/assets'\r\n            const response = await axios.get(url, config)\r\n            const result = response.data\r\n            const resData = result.result;\r\n            cursor = result.cursor;\r\n            data = data.concat(resData)\r\n        } while (cursor)\r\n        return data;\r\n    };\r\n\r\n    /**\r\n     * \r\n     * @param {*} asset le NFT dont on veut récupérer le prix d'acquisition\r\n     */\r\n    const getPriceInfo = async (asset, allPrices, historicalPrices) => {\r\n\r\n        try {\r\n            const ethcurrentPrice = localStorage.getItem('ethPrice');\r\n            const ethPriceHistory = historicalPrices\r\n            let ethPrice;\r\n            let config = {\r\n                params: {\r\n                    'page_size': 20,\r\n                    'buy_token_address': '0xacb3c6a43d15b907e8433077b6d38ae40936fe2c',\r\n                    'buy_token_id': asset.id,\r\n                    'order_by': 'timestamp',\r\n                    'direction': 'desc'\r\n                },\r\n            }\r\n            const url = 'https://api.x.immutable.com/v1/orders'\r\n            const response = await axios.get(url, config)\r\n\r\n            const result = response.data.result[0].amount_sold\r\n            const proto = response.data.result[0].buy.data.properties.image_url.split(\"id=\")[1].split(\"&q=\").join(\"-\")\r\n            //ethprice at updated_tmstp time\r\n            let unix_time = Date.parse(response.data.result[0].updated_timestamp)\r\n            unix_time = new Date(unix_time).setUTCHours(0, 0, 0, 0)\r\n            let found = ethPriceHistory.find(element => element[0] === unix_time)\r\n            ethPrice = found === undefined ? ethcurrentPrice : found[1]\r\n\r\n            const price = (result * Math.pow(10, -18) * ethPrice).toFixed(2)\r\n            points += totalprotos[proto][\"points\"]\r\n            asset.token_proto = proto;\r\n            asset.buyPrice = price;\r\n            asset.actualPrice = getActualPrice(asset.token_proto, allPrices)\r\n            asset.diffPrice = (+asset.actualPrice - +asset.buyPrice).toFixed(2)\r\n            //getActualPrice();\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n            asset.token_proto = undefined;\r\n            asset.buyPrice = undefined;\r\n            asset.actualPrice = undefined;\r\n            asset.diffPrice = undefined;\r\n        }\r\n        return null;\r\n\r\n    };\r\n\r\n    /**\r\n     * \r\n     * @param {*} token_proto \r\n     * @param {*} allPrices la liste des prix actuels\r\n     * @returns le prix du proto analysé\r\n     */\r\n    const getActualPrice = (token_proto, allPrices) => {\r\n        try {\r\n            return (allPrices.filter((proto) => proto.token_proto === token_proto)[0].price)\r\n        } catch (err) {\r\n            console.log(err)\r\n            return undefined\r\n        }\r\n    }\r\n\r\n    const iterOnAssets = async (assets, allPrices) => {\r\n\r\n        const historicalPrices = await getHistoricalEthPrice();\r\n        // for (const asset of assets) {\r\n\r\n        //     //Pour chaque asset, on lui rajoute une propriété token_proto, buyPrice, actualPrice, diffPrice\r\n\r\n        //     await getPriceInfo(asset, allPrices, historicalPrices)\r\n        // };\r\n\r\n        await Promise.all(assets.map(async (asset) => {\r\n            await getPriceInfo(asset, allPrices, historicalPrices)\r\n        }))\r\n        return;\r\n    }\r\n\r\n    async function init() {\r\n        try {\r\n            setLoading(true)\r\n            // On récupère les prix par proto\r\n            const allPrices = await getAllPrices();\r\n            //On récupère la liste des assets, telle que retournée par l'API\r\n            const assets = await getAllAssets();\r\n            await iterOnAssets(assets, allPrices);\r\n            setData(assets)\r\n            setPoints(points)\r\n            setLoading(false)\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, []);\r\n\r\n    return { data: data, isLoading: isLoading, points: statePoints /*allPrices: allPrices*/ }\r\n}\r\n\r\nexport default useGetNFTs","import useCard from \"./useCard\";\r\nimport Item from \"../Item\";\r\nimport { CardWrapper } from '../../styles/GlobalStyle'\r\n\r\nfunction Card({ data }) {\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            {data.token_proto && data.buyPrice !== undefined && (\r\n                <CardWrapper className=\"col\">\r\n                    <div>\r\n                        <Item key={`${data.token_proto}`} proto={data} />\r\n                        <p>buying price : {data.buyPrice} </p>\r\n                        <span> actual price : {data.actualPrice}</span>\r\n                        <span> diff : {data.diffPrice}</span>\r\n                    </div>\r\n                </CardWrapper>)}\r\n        </div>\r\n\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default Card","\r\nimport { useState, useEffect } from 'react'\r\n\r\n\r\nconst useWalletData = (assets) => {\r\n\r\n    const [investment, setInvestment] = useState(0);\r\n    const [values, setValues] = useState(0);\r\n    const [roi, setRoi] = useState(0);\r\n    const [isLoading, setLoading] = useState(false);\r\n\r\n\r\n\r\n    const getWalletData = (assets) => {\r\n\r\n        setLoading(true)\r\n\r\n        var sumBuyPrice = 0;\r\n        var sumValues = 0;\r\n        var sumDiff = 0;\r\n\r\n        assets.forEach((asset) => {\r\n            if (asset.buyPrice && asset.actualPrice && asset.diffPrice !== undefined) {\r\n                sumBuyPrice += +asset.buyPrice;\r\n                sumValues += +asset.actualPrice;\r\n                sumDiff += +asset.diffPrice;\r\n            }\r\n        });\r\n\r\n        setInvestment(sumBuyPrice)\r\n        setValues(sumValues)\r\n        setRoi(sumDiff)\r\n        setLoading(false)\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        getWalletData(assets);\r\n    }, []);\r\n\r\n    return { investment: investment, values: values, roi: roi, }\r\n\r\n}\r\n\r\nexport default useWalletData","import useWalletData from './useWalletData'\r\nimport { Spinner } from 'react-bootstrap'\r\n\r\n\r\nfunction WalletData({ assets, points }) {\r\n    const { investment, values, roi, isLoading } = useWalletData(assets);\r\n    const totalPoints = 101539397;\r\n    const totalDistributedImx = 400000;\r\n    return (\r\n        <div>\r\n            {isLoading ? <div className=\"container d-flex justify-content-center\">\r\n                <Spinner animation=\"grow\" /> </div> :\r\n                <>\r\n                    investment : {investment.toFixed(2)},\r\n                    value : {values.toFixed(2)},\r\n                    roi : {roi.toFixed(2)}\r\n                    points : {points.toFixed(2)},\r\n                    estimated IMX airdrop : {(totalDistributedImx * points / totalPoints).toFixed(2)}\r\n                </>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WalletData","import { useState, useEffect } from 'react'\r\nimport useGetNFTs from './useGetNFTs'\r\nimport Card from './Card'\r\nimport WalletData from './WalletData'\r\nimport '../../styles/Collection.css'\r\nimport { Spinner } from 'react-bootstrap'\r\nimport { Link } from 'react-router-dom'\r\nimport { SearchWrapper, Parallax, SearchBar, CardWrapper } from '../../styles/GlobalStyle'\r\n\r\n\r\n\r\nfunction CardsList({ address }) {\r\n\r\n    /**\r\n     * useGetNFTs retourne une liste de toutes les cartes détenues par le compe en question\r\n     * sous forme : \r\n     * [\r\n     *      {   \r\n     *      actualPrice: \"0.58\"\r\n            buyPrice: \"0.51\"\r\n            collection: {name: \"Gods Unchained\", icon_url: null}\r\n            created_at: \"2021-04-06T16:39:26.376618Z\"\r\n            description: null\r\n            diffPrice: \"0.07\"\r\n            id: \"0x086821ef4b22e79493e8487265466f21755de7d24b0e34acb77d124b9ae8f443\"\r\n            image_url: \"https://card.godsunchained.com/?id=917&q=3\"\r\n            metadata: {god: \"neutral\", set: \"trial\", mana: 2, name: \"Vow of Champions\", type: \"card\", …}\r\n            name: \"Vow of Champions\"\r\n            status: \"imx\"\r\n            token_address: \"0xacb3c6a43d15b907e8433077b6d38ae40936fe2c\"\r\n            token_proto: \"917-3\"\r\n            updated_at: \"2021-07-22T08:29:39.46108Z\"\r\n            uri: null\r\n            user: \"0xc137fba1f3438f2512b035e2d16274421d0249db\"\r\n     *      }\r\n     * ]\r\n     */\r\n    const { data: userCards, isLoading, points } = useGetNFTs(address);\r\n\r\n    const [searchParam, setSearchParam] = useState('');\r\n\r\n\r\n\r\n    const handleInput = (e) => {\r\n        setSearchParam(e.target.value.toLowerCase())\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <SearchWrapper className=\"container d-flex justify-content-center\">\r\n                <SearchBar type=\"text\" placeholder=\"Search a card\" onChange={handleInput} />\r\n            </SearchWrapper>\r\n            {isLoading ? <div className=\"container d-flex justify-content-center\">\r\n                <Spinner animation=\"grow\" /> </div> :\r\n                <>\r\n                    <Link to={`/godsunchained/user/${address}/history?type=all`}>Show trade history</Link>\r\n                    <WalletData assets={userCards} points={points} />\r\n                    <ul className=\"list-unstyled\">\r\n                        <div className=\"row\" style={{ width: \"100%\" }}>\r\n                            {userCards.map((card) => {\r\n\r\n                                return (\r\n                                    card.metadata.name.toLowerCase().includes(searchParam) &&\r\n\r\n                                    <Card data={card} />\r\n                                )\r\n\r\n                            }\r\n                            )}\r\n                        </div>\r\n                    </ul>\r\n                </>}\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CardsList","import { useState, useEffect } from 'react'\r\nimport axios from \"axios\";\r\nimport { getEthPrice, getAllProtos, getHistoricalEthPrice } from '../../../utils/apiCalls'\r\nimport totalprotos from '../../../assets/totalprotos.json'\r\n\r\n\r\nconst useGetTrades = (address) => {\r\n\r\n    const [history, setHistory] = useState([])\r\n    const [activeTrades, setActiveTrades] = useState([])\r\n    const [benefs, setBenefs] = useState(0);\r\n    const [pending, setPending] = useState(0);\r\n\r\n\r\n    const getAllTrades = async () => {\r\n        let config = {\r\n            params: {\r\n                'tokenAddress': \"0xacb3c6a43d15b907e8433077b6d38ae40936fe2c\",\r\n                'makerAddress': address,\r\n            },\r\n        }\r\n        const url = \"https://gy2601wgv6.execute-api.us-east-1.amazonaws.com/dev/filledorders\"\r\n        const response = await axios.get(url, config)\r\n        setHistory(response.data)\r\n        return history;\r\n    }\r\n\r\n    const getAllActivePositions = (history) => {\r\n        let activeTrades = [];\r\n        history.forEach((trade) => {\r\n            let result = history.filter(elem => elem.token_id === trade.token_id)\r\n            if (result.length === 1) {\r\n                activeTrades.push(trade)\r\n            }\r\n        })\r\n        setActiveTrades(activeTrades);\r\n        return activeTrades;\r\n\r\n    }\r\n\r\n    const sumActive = (activeTrades) => {\r\n        let sum = 0;\r\n        activeTrades.forEach((trade) => {\r\n            sum += trade.usd_price;\r\n        })\r\n        setPending(sum)\r\n        return sum;\r\n    }\r\n\r\n    const sumBenefs = (history) => {\r\n        let sum = 0;\r\n        history.forEach((trade) => {\r\n            if (trade.makerAddress === address) {\r\n                console.log(\"==\")\r\n                sum += trade.usd_price;\r\n            }\r\n            else {\r\n                sum -= trade.usd_price;\r\n            }\r\n        });\r\n        setBenefs(sum)\r\n        return sum;\r\n    }\r\n\r\n    const init = async () => {\r\n        try {\r\n            const _history = await getAllTrades();\r\n\r\n        } catch (err) { console.log(err) }\r\n\r\n    }\r\n\r\n    const calcs = async () => {\r\n        const _activeTrades = getAllActivePositions(history)\r\n        const _benefs = sumBenefs(history);\r\n        const _pending = sumActive(_activeTrades);\r\n        console.log(_benefs);\r\n        console.log(_pending);\r\n    }\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        calcs();\r\n    }, [history]);\r\n\r\n    return { history: history, activeTrades: activeTrades, benefs: benefs, pending: pending }\r\n}\r\n\r\nexport default useGetTrades","\r\nimport { SearchWrapper, Parallax, SearchBar, CardWrapper } from '../../../styles/GlobalStyle'\r\nimport Item from \"../../Item\";\r\n\r\n\r\nfunction HistoryCard({ trade, address }) {\r\n    return (\r\n        <>\r\n            <CardWrapper className=\"col\">\r\n                <div>\r\n                    <Item key={`${trade.token_proto}`} proto={trade} />\r\n                    {trade.makerAddress !== address ? <p>buy price : {trade.usd_price} </p> : <p>sell price : {trade.usd_price} </p>}\r\n\r\n                </div>\r\n            </CardWrapper>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default HistoryCard","import Item from \"../../Item\";\r\nimport { CardWrapper } from '../../../styles/GlobalStyle'\r\nimport useGetTrades from './useGetTrades'\r\nimport HistoryCard from './HistoryCard'\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Link, useLocation, BrowserRouter as Router } from \"react-router-dom\";\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\n\r\n\r\nfunction HistoryList({ address }) {\r\n\r\n    let type = useQuery().get(\"type\");\r\n    console.log(type)\r\n\r\n    const { history, activeTrades, benefs, pending } = useGetTrades(address);\r\n    console.log(activeTrades)\r\n\r\n    return (\r\n        <>\r\n            <Link to={`/godsunchained/user/${address}/history?type=active`}>Show unsold cards</Link>\r\n            <br />\r\n            <Link to={`/godsunchained/user/${address}/history?type=all`}>Show all trade cards</Link>\r\n            <br />\r\n            <Link to={`/godsunchained/user/${address}/wallet`}>Show wallet</Link>\r\n\r\n\r\n\r\n            <div>\r\n                <p>Unsold cards : {pending}</p>\r\n                <p>Profits : {benefs}</p>\r\n            </div>\r\n            <ul className=\"list-unstyled\">\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row\" style={{ width: \"100%\" }}>\r\n                        {type === \"all\" ?\r\n\r\n                            //A\r\n                            history.map((trade) => {\r\n\r\n                                return (<HistoryCard trade={trade} address={address} />)\r\n                            })\r\n                            :\r\n                            //B\r\n                            type === \"active\" ?\r\n                                activeTrades.map((trade) => {\r\n\r\n                                    return (<HistoryCard trade={trade} address={address} />)\r\n                                })\r\n                                //else\r\n                                : null\r\n\r\n\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </ul>\r\n        </>\r\n\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default HistoryList","import { useParams } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport CardsList from \"../components/Users/CardsList\";\r\nimport HistoryList from \"../components/Users/History/HistoryList\"\r\nimport { CollectionWrapper } from '../styles/GlobalStyle'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction User() {\r\n\r\n    const { id: address } = useParams();\r\n    const { type: type } = useParams();\r\n\r\n\r\n    return (\r\n        <>\r\n            <p>{console.log(type)}</p>\r\n            {type === \"history\" && <HistoryList address={address}></HistoryList>}\r\n            {type !== \"history\" && <CardsList address={address} />}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default User","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { HashRouter as Router, Route, Redirect } from 'react-router-dom'\r\nimport LinkWrapper from './components/LinkWrapper';\r\nimport Account from './pages/Account'\r\nimport Header from './components/Header'\r\nimport Discounts from './pages/Discounts'\r\nimport Browse from './pages/Browse'\r\nimport Details from './pages/Details'\r\nimport User from './pages/User'\r\nimport './styles/all.css'\r\nimport { Parallax } from './styles/GlobalStyle'\r\n\r\nimport { LoggedProvider } from './utils/context'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<Router>\r\n\t\t\t<LoggedProvider>\r\n\t\t\t\t<Parallax>\r\n\t\t\t\t\t<Header />\r\n\t\t\t\t\t<Route exact path=\"/godsunchained\">\r\n\t\t\t\t\t\t<Redirect to=\"/godsunchained/browse\" />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route path=\"/godsunchained/browse\">\r\n\t\t\t\t\t\t<Browse />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route path=\"/godsunchained/account\">\r\n\t\t\t\t\t\t<Account />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route path=\"/godsunchained/discounts\">\r\n\t\t\t\t\t\t<Discounts />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route path=\"/godsunchained/protos/:id\">\r\n\t\t\t\t\t\t<Details />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route path=\"/godsunchained/user/:id/:type\">\r\n\t\t\t\t\t\t<User />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t</Parallax>\r\n\t\t\t</LoggedProvider>\r\n\t\t</Router>\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById('root')\r\n)\r\n"],"sourceRoot":""}